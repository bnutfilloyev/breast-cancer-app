%% Sequence diagram for end-to-end breast cancer analysis workflow
sequenceDiagram
    participant Clinician
    participant Frontend as Next.js Frontend
    participant Backend as FastAPI Backend
    participant Model as YOLO11L Service
    participant Storage as File Storage
    participant Database as SQL Database

    Clinician->>Frontend: Bemorni tanlaydi va mammografiya suratlarini yuklaydi
    Frontend->>Backend: POST /infer/multi (ko'rinishlar + patient_id)
    Backend->>Backend: Ma'lumotni tekshirish va tahlil yozuvini yaratish
    Backend->>Model: In'ferentsiyani ishga tushirish (YOLO11L.predict)
    Model-->>Backend: Deteksiya natijalari (bounding box + klasslar)
    Backend->>Storage: Suratlar va thumbnail fayllarini saqlash
    Backend->>Database: Tahlil va rasm metadata sini yozish
    Backend-->>Frontend: JSON javob (dominant label, total_findings, analysis_id)
    Frontend->>Frontend: TanStack Query holatini yangilash
    Frontend-->>Clinician: Dashboardda natijalar, trendlar va tavsiyalarni ko'rsatish
